# 顺序表的定义

线性表的顺序存储又称顺序表，是指用一组地址连续的存储单元依次存储线性表的数据元素，从而使得逻辑上相邻的元素在物理上也相邻。

第一个元素存储在线性表的起始位置，第 i 个元素的存储位置后面紧跟着第 i+1 个元素
$i$ 为元素 $a_i$ 在线性表中的位序。

线性表的特点是表中元素的逻辑顺序和物理顺序一致，即元素在逻辑上相邻的元素在物理上也相邻。

假设线性表 L 存储的起始位置为 LOC(A), sizeof(ElemType)是每个数据元素所占用的存储空间的大小，则表 L 所对应的顺序存储如下表所示：
|数组下标|顺序表|内存地址|
|:-:|:-:|:-:|
|0|$a_1$|LOC(A)|
|1|$a_2$|LOC(A)+sizeof(ElemType)|
|2|$a_3$|LOC(A)+2*sizeof(ElemType)|
|...|...|...|
|i-1|$a_i$|LOC(A)+(i-1)*sizeof(ElemType)|
|...|...|...|
|n-1|$a_n$|LOC(A)+(n-1)*sizeof(ElemType)|
|...|...|...|
|MaxSize-1|...|LOC(A)+(MaxSize-1)*sizeof(ElemType)|

每个数据元素的存储位置都和线性表的起始位置相差一个和该元素的位序成正比的常数，因此，线性表的任一数据元素都可以随机存取，线性表的顺序存储结构是一种随机存取的存储结构。

**注意 1**：线性表中的元素的位序是从 1 开始的，而数组的下标是从 0 开始的，因此，线性表中的第 i 个元素在数组中的下标是 i-1。

## 静态分配线性表

假定线性表的元素类型为 ElemType，线性表的最大长度为 MaxSize，线性表的类型定义如下：

```c
#define MaxSize 50          // 定义线性表的最大长度
typedef struct {
    ElemType data[MaxSize]; // 用数组存储线性表的元素
    int length;             // 线性表的当前长度
} SqList;                   // 顺序表的类型定义
```

## 动态分配线性表

一维数组可以是静态分配的也可以是动态分配的，静态分配的数组在编译时就已经确定了数组的大小，而动态分配的数组在运行时才确定数组的大小。

```c
#define InitSize 100        // 顺序表的初始分配空间
typedef struct {
    ElemType *data;         // 指向动态分配数组的指针
    int MaxSize, length;    // 顺序表的最大容量和当前长度
} SeqList;                  // 动态分配顺序表的类型定义
```

- C 的初始动态分配语句为

```c
L.data = (ElemType *)malloc(InitSize * sizeof(ElemType));
```

- C++的初始动态分配语句为
  - [new 关键字](../../../../CppProgramDesign/1.1.BasicDataType/CppBasicDataType.md#new-关键字)

```cpp
L.data = new ElemType[InitSize];
```

**注意 1**： 动态分配并不是链式存储结构，而是在程序运行时根据需要动态分配存储空间，因此，动态分配的数组在程序运行时可以改变数组的大小，但是数组的存储空间是连续的。

**注意 2**： 动态分配的数组在使用完毕后，需要释放数组的存储空间，否则会造成内存泄漏。

## 顺序表的特点

1. 顺序表最主要的特点是随机访问，即通过首地址和元素序号可在时间 O(1)内找到指定的元素。
2. 循序表的存储密度高，每个结点只存储数据元素，不存储指针域，因此存储密度高。
3. 顺序表逻辑上相邻的元素物理上也相邻，所以插入和删除操作需要移动大量元素，时间复杂度为 O(n)。
